<!DOCTYPE HTML>
<html lang="">

<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="William&#39;s 隨手札記">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://a10000005588.github.io">
    <!--SEO-->

<meta name="keywords" content="Java,Spring">


<meta name="description" content="Spring Annotation 筆記這邊主要整理了我使用或是遇到的Spring Annotation資料查詢與統整的紀錄

API 相關 @Annotation@RestController...">


<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->

<title>
    
    Spring Annotation筆記整理 |
    
    William&#39;s 隨手札記
</title>

<link rel="alternate" href="/atom.xml" title="William&#39;s 隨手札記" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    

<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    

</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="William L.K.">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <h2>
                Just Code It.
            </h2>
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://a10000005588.github.io">
                        William&#39;s 隨手札記</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa "></i>
                                最新貼文串</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/programming"><i class="fa "></i>
                                程式語言筆記</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/backend/"><i class="fa "></i>
                                Web後端工程</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/tools/"><i class="fa "></i>
                                工具使用</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/blockchain/"><i class="fa "></i>
                                區塊鏈</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa clock"></i>
                                貼文軌跡</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/about/"><i class="fa "></i>
                                關於我(=´ᴥ`)</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Spring Annotation筆記整理">
            
            Spring Annotation筆記整理
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/Spring/">Spring</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-link" href="/tags/Java/">Java</a> <a class="tag-link" href="/tags/Spring/">Spring</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2020/03/10</span>
    </span>
    
    
</div>
        
        
        <p class="fa fa-exclamation-triangle warning">
            本文於<strong>
                340</strong>
            天之前發表，文章中的內容可能過期了，請謹慎服用。
        </p>
        
    </div>
    
    <div class="post-body post-content">
        <h1 id="Spring-Annotation-筆記"><a href="#Spring-Annotation-筆記" class="headerlink" title="Spring Annotation 筆記"></a>Spring Annotation 筆記</h1><p>這邊主要整理了我使用或是遇到的Spring Annotation資料查詢與統整的紀錄</p>
<a id="more"></a>
<h2 id="API-相關-Annotation"><a href="#API-相關-Annotation" class="headerlink" title="API 相關 @Annotation"></a>API 相關 @Annotation</h2><h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h3><p>將class設置為外部控制器</p>
<h4 id="RestControllerAdvice"><a href="#RestControllerAdvice" class="headerlink" title="@RestControllerAdvice"></a>@RestControllerAdvice</h4><p>等同於@ControllerAdvice + @ResponseBody</p>
<p>@ControllerAdvice為可在宣告的函式中使用@ExceptionHandler, @InitBinder或 @ModelAttribute註解的方法</p>
<h5 id="ExceptionHandler"><a href="#ExceptionHandler" class="headerlink" title="@ExceptionHandler"></a>@ExceptionHandler</h5><p>攔截所有控制器所發出的exception，並返回body型式</p>
<h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>控制器裡面的方法，使之成為外部請求</p>
<p>若要設置GET method, 如下<br>(也可以改成 POST, PUT, DELETE)</p>
<p>定義一組restful api前綴路由<br>ex : @RequestMapping(“/api/v1”)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequstMapping</span>(<span class="string">"/api/v1"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">hello</span> </span>&#123;</span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"helloworld"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要使用的話得在postman中用　<code>/api/v1/hello</code>　</p>
<h3 id="HTTP動作Annotation"><a href="#HTTP動作Annotation" class="headerlink" title="HTTP動作Annotation"></a>HTTP動作Annotation</h3><h4 id="PostMapping"><a href="#PostMapping" class="headerlink" title="@PostMapping"></a>@PostMapping</h4><h4 id="GetMapping"><a href="#GetMapping" class="headerlink" title="@GetMapping"></a>@GetMapping</h4><h4 id="PutMapping"><a href="#PutMapping" class="headerlink" title="@PutMapping"></a>@PutMapping</h4><h4 id="DeleteMapping"><a href="#DeleteMapping" class="headerlink" title="@DeleteMapping"></a>@DeleteMapping</h4><h3 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h3><p>可以接收Body參數，得透過class宣告一組object來接收　</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> Integer number;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">setType</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">setNumber</span><span class="params">(Integer number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> getType...</span><br><span class="line">    <span class="keyword">public</span> getNumber...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api/v1"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarController</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 透過宣告一個car，來接收Body的值 (type, number)</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/car"</span>)</span><br><span class="line">    <span class="function">function <span class="title">getCar</span><span class="params">(@RequestBody Car car)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="RequestHeader、-CookieValue"><a href="#RequestHeader、-CookieValue" class="headerlink" title="@RequestHeader、@CookieValue"></a>@RequestHeader、@CookieValue</h3><p>處理request header部分的注解：</p>
<p>Request Header的內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host                    localhost:8080  </span><br><span class="line">Accept                  text/html,application/xhtml+xml,application/xml;q=0.9  </span><br><span class="line">Accept-Language         fr,en-gb;q=0.7,en;q=0.3  </span><br><span class="line">Accept-Encoding         gzip,deflate  </span><br><span class="line">Accept-Charset          ISO-8859-1,utf-8;q=0.7,*;q=0.7  </span><br><span class="line">Keep-Alive              300</span><br></pre></td></tr></table></figure></p>
<p>透過 @RequestHeader(“”)接受其Header值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/displayHeaderInfo.do&quot;)  </span><br><span class="line">public void displayHeaderInfo(@RequestHeader(&quot;Accept-Encoding&quot;) String encoding,  </span><br><span class="line">                              @RequestHeader(&quot;Keep-Alive&quot;) long keepAlive)  &#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="SessionAttributes"><a href="#SessionAttributes" class="headerlink" title="@SessionAttributes"></a>@SessionAttributes</h3><p>該註解用來綁定HttpSession中的attribute對象的值，便於在方法中的參數里使用。</p>
<p>該註解有value、types兩個屬性，可以通過名字和類型指定要使用的attribute 對象；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>  </span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editPet.do"</span>)  </span><br><span class="line"><span class="meta">@SessionAttributes</span>(<span class="string">"pet"</span>)  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EditPetForm</span> </span>&#123;  </span><br><span class="line">    <span class="comment">// ...   </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>參考資料:<br>Spring MVC常用注解@PathVariable、@RequestHeader、@CookieValue、@RequestParam、@RequestBody、@SessionAttributes、@ModelAttribute</p>
<p><a href="https://www.cnblogs.com/EasonJim/p/8323017.html" target="_blank" rel="noopener">https://www.cnblogs.com/EasonJim/p/8323017.html</a></p>
<h3 id="JsonProperty-重點，遇到接不到request的值，用這就對了"><a href="#JsonProperty-重點，遇到接不到request的值，用這就對了" class="headerlink" title="@JsonProperty (重點，遇到接不到request的值，用這就對了)"></a>@JsonProperty (重點，遇到接不到request的值，用這就對了)</h3><p>用來接收application/json中，有大小不一型別的變數</p>
<p>ex: Postman script<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"contact"</span>:&#123;</span><br><span class="line">        <span class="attr">"cPhone"</span>:<span class="string">"0912345678"</span>, </span><br><span class="line">        <span class="attr">"cMail"</span>:<span class="string">" abc@test.com.tw "</span>, </span><br><span class="line">        <span class="attr">"cAddress"</span>:<span class="string">"台北市中正區信義路一段21-3號"</span></span><br><span class="line">    &#125;,...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>若要接到 PHONE或Website，需要定義 @JsonProperty(“PHONE”), @JsonProperty(“Website”)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lia201iReqDTO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    contactDto contact;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">contactDto</span> </span>&#123;</span><br><span class="line">        <span class="meta">@NotNull</span></span><br><span class="line">        <span class="meta">@JsonProperty</span>(<span class="string">"cPhone"</span>)</span><br><span class="line">        String cPhone;</span><br><span class="line">        <span class="meta">@JsonProperty</span>(<span class="string">"cMail"</span>)</span><br><span class="line">        String cMail;</span><br><span class="line">        <span class="meta">@JsonProperty</span>(<span class="string">"cAddress"</span>)</span><br><span class="line">        String cAddress;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h4><p>Spring REST consuming JSON uppercase vs lowercase<br><a href="https://stackoverflow.com/questions/26890398/spring-rest-consuming-json-uppercase-vs-lowercase" target="_blank" rel="noopener">https://stackoverflow.com/questions/26890398/spring-rest-consuming-json-uppercase-vs-lowercase</a></p>
<h2 id="驗證相關的Annotation"><a href="#驗證相關的Annotation" class="headerlink" title="驗證相關的Annotation"></a>驗證相關的Annotation</h2><h3 id="Valid與-Validated"><a href="#Valid與-Validated" class="headerlink" title="@Valid與@Validated"></a>@Valid與@Validated</h3><p>負責驗證有被定義校正的參數或object</p>
<p>先產生要校正的實體類(class)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Min</span>(<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pattern</span>(regexp = <span class="string">"^1(3|4|5|7|8)\\d&#123;9&#125;$"</span>,message = <span class="string">"手机号码格式错误"</span>)</span><br><span class="line">    <span class="meta">@NotBlank</span>(message = <span class="string">"手机号码不能为空"</span>)</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Email</span>(message = <span class="string">"邮箱格式错误"</span>)</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//... getter setter</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>於@Controller中　使用Valid做校正</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class FooController &#123;</span><br><span class="line"></span><br><span class="line">    // 對Foo class產生的foo做校正</span><br><span class="line">    @RequestMapping(&quot;/foo&quot;)</span><br><span class="line">    public String foo(@Validated Foo foo &lt;1&gt;, BindingResult bindingResult &lt;2&gt;) &#123;</span><br><span class="line">        if(bindingResult.hasErrors())&#123;</span><br><span class="line">            for (FieldError fieldError : bindingResult.getFieldErrors()) &#123;</span><br><span class="line">                //...</span><br><span class="line">            &#125;</span><br><span class="line">            return &quot;fail&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;success&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Validate-與-Valid差異"><a href="#Validate-與-Valid差異" class="headerlink" title="@Validate 與 @Valid差異"></a>@Validate 與 @Valid差異</h4><p>@Valid能進行嵌套驗證， @Validate不行</p>
<p>因為@Valid能加在成員屬性上，反而@Validated不能用在成員屬性。</p>
<p>舉例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"id不能為空值"</span>)</span><br><span class="line">    <span class="meta">@Min</span>(value = <span class="number">1</span>, message = <span class="string">"id必須為正整數"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"props不能為空直"</span>)</span><br><span class="line">    <span class="meta">@Size</span>(min = <span class="number">1</span>, message = <span class="string">"至少要有一個屬性"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;Prop&gt; props;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然而 Prop class如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prop</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"pid不能為空"</span>)</span><br><span class="line">    <span class="meta">@Min</span>(value = <span class="number">1</span>, message = <span class="string">"pid必須為正整數"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long pid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"vid不能為空"</span>)</span><br><span class="line">    <span class="meta">@Min</span>(value = <span class="number">1</span>, message = <span class="string">"vid必須為正整數"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long vid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span>(message = <span class="string">"pidName不能為空"</span>)</span><br><span class="line">    <span class="keyword">private</span> String pidName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span>(message = <span class="string">"vidName不能為空"</span>)</span><br><span class="line">    <span class="keyword">private</span> String vidName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>現在我們有個ItemController接受一個Item的參數，想要對Item進行驗證，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/item/add"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addItem</span><span class="params">(@Validated Item item, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line">        doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上圖中，如果Item實體的props屬性不額外加註釋，只有@NotNull和@Size，無論入參採用@Validated還是@Valid驗證，Spring Validation框架只會對Item的id和props做非空和數量驗證，不會對props字段裡的Prop實體進行字段驗證，也就是@Validated和@Valid加在方法參數前，<span style="color:red">都不會自動對參數進行嵌套驗證&lt;/ span&gt;</span></p>
<p>:::info<br>這邊指的嵌套(Nested)驗證，指的是若class Item中還有一個變數List<props> 且這個Props的class內也有自己定義驗證@Notnull, @NotBlank, 一層class內還有一個class定義自己的驗證，就叫做嵌套驗證<br>:::</props></p>
<p>要進行嵌套驗證的話得在 class Props中加入@Valid </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"id不能为空"</span>)</span><br><span class="line">    <span class="meta">@Min</span>(value = <span class="number">1</span>, message = <span class="string">"id必须为正整数"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Valid</span> <span class="comment">// 嵌套验证必须用@Valid</span></span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">"props不能为空"</span>)</span><br><span class="line">    <span class="meta">@Size</span>(min = <span class="number">1</span>, message = <span class="string">"props至少要有一个自定义属性"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;Prop&gt; props;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="補充-負責校驗的Annotation"><a href="#補充-負責校驗的Annotation" class="headerlink" title="補充 負責校驗的Annotation"></a>補充 負責校驗的Annotation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Null 被註釋的元素必須為 null</span><br><span class="line">@NotNull 被註釋的元素必須不為 null</span><br><span class="line">@AssertTrue 被註釋的元素必須為 true</span><br><span class="line">@AssertFalse 被註釋的元素必須為 false</span><br><span class="line">@Min(value) 被註釋的元素必須是一個數字，其值必須大於等於指定的最小值</span><br><span class="line">@Max(value) 被註釋的元素必須是一個數字，其值必須小於等於指定的最大值</span><br><span class="line">@DecimalMin(value) 被註釋的元素必須是一個數字，其值必須大於等於指定的最小值</span><br><span class="line">@DecimalMax(value) 被註釋的元素必須是一個數字，其值必須小於等於指定的最大值</span><br><span class="line">@Size(max=, min=) 被註釋的元素的大小必須在指定的範圍內</span><br><span class="line">@Digits (integer, fraction) 被註釋的元素必須是一個數字，其值必須在可接受的範圍內</span><br><span class="line">@Past 被註釋的元素必須是一個過去的日期</span><br><span class="line">@Future 被註釋的元素必須是一個將來的日期</span><br><span class="line">@Pattern(regex=,flag=) 被註釋的元素必須符合指定的正則表達式</span><br><span class="line"></span><br><span class="line">@NotBlank(message =) 驗證字符串非null，且長度必須大於0</span><br><span class="line">@Email 被註釋的元素必須是電子郵箱地址</span><br><span class="line">@Length(min=,max=) 被註釋的字符串的大小必須在指定的範圍內</span><br><span class="line">@NotEmpty 被註釋的字符串的必須非空</span><br><span class="line">@Range(min=,max=,message=) 被註釋的元素必須在合適的範圍內</span><br></pre></td></tr></table></figure>
<h4 id="補充-用BindingResult接收-Valid拋出來的錯誤訊息"><a href="#補充-用BindingResult接收-Valid拋出來的錯誤訊息" class="headerlink" title="補充: 用BindingResult接收@Valid拋出來的錯誤訊息"></a>補充: 用<code>BindingResult</code>接收@Valid拋出來的錯誤訊息</h4><p>假設有驗證錯誤的物件為 BindingResult bindingResult<br>可透過bindResult取得錯誤資訊</p>
<p>舉例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class FlightDTO &#123;</span><br><span class="line">    @NotBlank</span><br><span class="line">    private String terminal; // 航廈</span><br><span class="line">    @NotBlank</span><br><span class="line">    private String type; // 航班種類</span><br><span class="line">    @NotBlank</span><br><span class="line">    private String carrier; // 航空公司代碼</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>若使用@Valid對FlightDTO做參數驗證，假設有一Request少輸入terminal資訊，就會發出bindingResult訊息，其中包含：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;FieldError&gt; fieldErrors = bindingResult.getFieldErrors();</span><br><span class="line"><span class="keyword">for</span>(FieldError fieldError: fieldErrors) &#123;</span><br><span class="line">    <span class="comment">//　封裝錯誤格式</span></span><br><span class="line">    FieldResource fieldResource = <span class="keyword">new</span> FieldResource(</span><br><span class="line">        fieldError.getObjectName(), <span class="comment">// 取得物件名稱：為FlightDTO</span></span><br><span class="line">        fieldError.getField(), <span class="comment">// 為properties(terminal)</span></span><br><span class="line">        fieldError.getCode(), <span class="comment">// 為@Notblank</span></span><br><span class="line">        fieldError.getDefaultMessage() <span class="comment">// 為@Notblank的錯誤資訊</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>:::info<br>BindingResult為Error的子介面</p>
<p>BindingResult<br><a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/BindingResult.html" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/BindingResult.html</a><br>Error:<br><a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/Errors.html" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/Errors.html</a><br>:::</p>
<h4 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h4><p>使用spring validation完成数据后端校验<br><a href="https://www.cnkirito.moe/spring-validation/" target="_blank" rel="noopener">https://www.cnkirito.moe/spring-validation/</a></p>
<p>@Validated和@Valid区别：Spring validation验证框架对入参实体进行嵌套验证必须在相应属性（字段）加上@Valid而不是@Validated<br><a href="https://blog.csdn.net/qq_27680317/article/details/79970590" target="_blank" rel="noopener">https://blog.csdn.net/qq_27680317/article/details/79970590</a></p>
<h2 id="操作數據庫相關數據相關的Annotation"><a href="#操作數據庫相關數據相關的Annotation" class="headerlink" title="操作數據庫相關數據相關的Annotation"></a>操作數據庫相關數據相關的Annotation</h2><h3 id="Entity"><a href="#Entity" class="headerlink" title="@Entity"></a>@Entity</h3><p>表示是一個對應到DB Table的物件</p>
<h3 id="Id"><a href="#Id" class="headerlink" title="@Id"></a>@Id</h3><p>聲明該欄位為主鍵</p>
<h3 id="GeneratedValue"><a href="#GeneratedValue" class="headerlink" title="@GeneratedValue"></a>@GeneratedValue</h3><p>指定ID生成的策略，若沒有設置的化, Hibernate對應的是為一個Not null的物件，得自行設定id到物件內。<br>但通常會自行在新增資料時產生ID, 故@Id與@GeneratedValue會常常同時出現</p>
<p>因為Hibernate會遇見不同的Database，所以有各種不同的生成策略:</p>
<h4 id="GenerationType-Auto"><a href="#GenerationType-Auto" class="headerlink" title="GenerationType.Auto"></a>GenerationType.Auto</h4><p>Hibernate會根據採用的Database為何，來決定要用 GenerationType.Identity 或 GenerationType.SEQUENCE。<br>(大部分的情況都會採用 GenerationType.SEQUENCE)</p>
<h4 id="GenerationType-IDENTITY"><a href="#GenerationType-IDENTITY" class="headerlink" title="GenerationType.IDENTITY"></a>GenerationType.IDENTITY</h4><p>透過auto-incremented database column來產生primary key.<br>常見的MySQL和MMSQL都採用該方式，相對應的DDL語言為以下所示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id BIGINT NOT NULL AUTO_INCREMENT</span><br></pre></td></tr></table></figure></p>
<h4 id="GenerationType-SEQUENCE"><a href="#GenerationType-SEQUENCE" class="headerlink" title="GenerationType.SEQUENCE"></a>GenerationType.SEQUENCE</h4><p>設定該策略，通常也會給入另一個Annotation <code>@SequenceGenerator</code>，如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="meta">@GeneratedValue</span>(strategy = GenerationType.SEQUENCE, generator = <span class="string">"author_generator"</span>)</span><br><span class="line"><span class="meta">@SequenceGenerator</span>(name=<span class="string">"author_generator"</span>, sequenceName = <span class="string">"author_seq"</span>, allocationSize=<span class="number">50</span>)</span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"id"</span>, updatable = <span class="keyword">false</span>, nullable = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">private</span> Long id</span><br></pre></td></tr></table></figure>
<p>若沒有指定，Hibernate會使用預設的SequenceGenerator</p>
<p>可以看到若指定 sequenceGenerator的name為author_seq, Hibernate就會在 <code>author_seq</code>這個table查找下一個id值為多少</p>
<p><img src="https://i.imgur.com/Uw8ebCO.jpg" alt=""></p>
<p>注意，在Postgres情況下不適合用該方法<br><a href="https://stackoverflow.com/questions/4288740/hibernate-use-of-postgresql-sequence-does-not-affect-sequence-table/4502062#4502062" target="_blank" rel="noopener">https://stackoverflow.com/questions/4288740/hibernate-use-of-postgresql-sequence-does-not-affect-sequence-table/4502062#4502062</a></p>
<h4 id="GenerationType-SEQUENCE-1"><a href="#GenerationType-SEQUENCE-1" class="headerlink" title="GenerationType.SEQUENCE"></a>GenerationType.SEQUENCE</h4><p>當不希望應用程式與某一種 Database Engine 綁死的時候，可以使用這種方法，透過另外一個表格來定義 ID</p>
<p>會透過SQL，建立存放各種column的seqeunce<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE APP_SEQ_STORE ( APP_SEQ_NAME VARCHAR(255) NOT NULL, APP_SEQ_VALUE BIGINT NOT NULL, PRIMARY KEY(APP_SEQ_NAME) );</span><br></pre></td></tr></table></figure></p>
<h5 id="Reference-https-thoughts-on-java-org-jpa-generate-primary-keys"><a href="#Reference-https-thoughts-on-java-org-jpa-generate-primary-keys" class="headerlink" title="Reference: https://thoughts-on-java.org/jpa-generate-primary-keys/"></a>Reference: <a href="https://thoughts-on-java.org/jpa-generate-primary-keys/" target="_blank" rel="noopener">https://thoughts-on-java.org/jpa-generate-primary-keys/</a></h5><h4 id="IdClass-复合主键"><a href="#IdClass-复合主键" class="headerlink" title="@IdClass 复合主键"></a>@IdClass 复合主键</h4><p>复合主键由多个主键字段组成。每个主键字段必须是上面列出的支持类型之一。<br>例如，以下项目实体类的主键由两个字段组成:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span> <span class="meta">@IdClass</span>(ProjectId.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Project</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="keyword">int</span> departmentId;</span><br><span class="line">    <span class="meta">@Id</span> <span class="keyword">long</span> projectId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在ProjectId.class中聲明兩個主鍵值<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class ProjectId &#123;</span><br><span class="line">    <span class="keyword">int</span> departmentId;</span><br><span class="line">    <span class="keyword">long</span> projectId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Embeddable"><a href="#Embeddable" class="headerlink" title="@Embeddable"></a>@Embeddable</h4><p>嵌入式主键<br>表示复合主键的另一种方法是使用可嵌入的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Project</span> </span>&#123;</span><br><span class="line">    <span class="meta">@EmbeddedId</span> ProjectId id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Embeddable</span></span><br><span class="line">Class ProjectId &#123;</span><br><span class="line">    <span class="keyword">int</span> departmentId;</span><br><span class="line">    <span class="keyword">long</span> projectId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Column"><a href="#Column" class="headerlink" title="@Column"></a>@Column</h3><p>宣告該變數與資料庫欄位的對映</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column</span>(nam=”category_name” length=<span class="number">20</span>)</span><br><span class="line"><span class="function">Public <span class="keyword">void</span> <span class="title">getCategoryName</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Return <span class="keyword">this</span>.categoryName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="參考資料-1"><a href="#參考資料-1" class="headerlink" title="參考資料:"></a>參考資料:</h4><p>SPRING中常用的注解（@ENTITY，@TABLE，@COLUMN，@REPOSITORY，@SERVICE）<a href="https://www.cnblogs.com/hoojjack/p/6568920.html" target="_blank" rel="noopener">https://www.cnblogs.com/hoojjack/p/6568920.html</a></p>
<p>JPA 主键@Id、@IdClass、@Embeddable、@EmbeddedId<br><a href="https://blog.csdn.net/tracycater/article/details/78319021" target="_blank" rel="noopener">https://blog.csdn.net/tracycater/article/details/78319021</a></p>
<h3 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h3><p>@Data 自動產生 getter(), setter(), toString(), 節省一大堆代碼的神Annotation</p>
<h4 id="前置作業：-引入lombok"><a href="#前置作業：-引入lombok" class="headerlink" title="前置作業： 引入lombok"></a>前置作業： 引入lombok</h4><p>要使用 @Data 注解要先引入lombok</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lombok為一個Library，可以用簡單的註解形式來簡化代碼，提高開發效率。</span><br></pre></td></tr></table></figure>
<h4 id="如何使用lobok"><a href="#如何使用lobok" class="headerlink" title="如何使用lobok"></a>如何使用lobok</h4><ol>
<li><p>在<code>maven</code>中添加依賴</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.18.4&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在編譯器中添加插件</p>
</li>
</ol>
<p>以IDEA為例，在setting的plugin裡搜索lombok plugin，安裝插件。</p>
<p>直接在Class上加上@Data即可</p>
<p>例如一个简单的Person Class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String hobbit;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, String address, Integer age, String hobbit, String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.hobbit = hobbit;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHobbit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbit</span><span class="params">(String hobbit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbit = hobbit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", hobbit='"</span> + hobbit + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", phone='"</span> + phone + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用了 @Data</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String hobbit;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在按快捷鍵 <code>Ctrl + F12</code>，可以查找到set,get,toString 方法。</p>
<p>使用 @Data 註解就可以有下面幾個註解的功能： @ToString、@Getter、@Setter、@EqualsAndHashCode、@NoArgsConstructor 。</p>
<p>:::info<br>常用的幾個註解：<br>@Data ： 注在類上，提供類的get、set、equals、hashCode、canEqual、toString方法<br>@Setter ： 注在屬性上，提供 set 方法<br>@Getter ： 注在屬性上，提供 get 方法<br>構造函數</p>
<p>@AllArgsConstructor<br>会生成一个包含所有变量，同时如果变量使用了NotNull annotation ， 会进行是否为空的校验，<br>全部参数的Constructor函数的自动生成，该注解的作用域也是只有在实体类上，参数的顺序与属性定义的顺序一致。</p>
<p>範例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import lombok.AllArgsConstructor;</span><br><span class="line"></span><br><span class="line">@AllArgsConstructor</span><br><span class="line">class MyClass&#123;</span><br><span class="line">    private String one;</span><br><span class="line">    private Integer three;  </span><br><span class="line">    private Integer two;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">自動生成建構子:</span><br><span class="line">public MyClass(String one, Integer three, Integer two) &#123;</span><br><span class="line">    this.one = one;</span><br><span class="line">    this.three = three;</span><br><span class="line">    this.two = two;        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>參考: <a href="https://stackoverflow.com/questions/49106072/how-to-specify-the-order-of-parameters-in-allargsconstructor-in-lombok" target="_blank" rel="noopener">https://stackoverflow.com/questions/49106072/how-to-specify-the-order-of-parameters-in-allargsconstructor-in-lombok</a></p>
<p>@NoArgsConstructor<br>產生沒有參數的建構子<br>generate a constructor with no parameters.</p>
<p>@RequiredArgsConstructor<br>会生成一个包含常量（final），和标识了@NotNull的变量 的构造方法。</p>
<p>@EqualsAndHashCode ： 注在类上，提供对应的 equals 和 hashCode 方法<br>@Log4j/@Slf4j ： 注在类上，提供对应的 Logger 对象，变量名为 log<br>:::</p>
<p>:::warning<br>注意的是，同时使用@Data 和 @AllArgsConstructor 后 ，默认的无参构造函数失效，如果需要它，要重新设置 @NoArgsConstructor<br>:::</p>
<p>參考資料</p>
<p>@Data注解 与 lombok<br><a href="https://www.jianshu.com/p/c1ee7e4247bf" target="_blank" rel="noopener">https://www.jianshu.com/p/c1ee7e4247bf</a><br>学习Spring Boot：（十五）使用Lombok来优雅的编码<br><a href="https://blog.wuwii.com/springboot-15.html" target="_blank" rel="noopener">https://blog.wuwii.com/springboot-15.html</a></p>
<h2 id="Spring載入Bean與標示為Bean有關的Annotation"><a href="#Spring載入Bean與標示為Bean有關的Annotation" class="headerlink" title="Spring載入Bean與標示為Bean有關的Annotation"></a>Spring載入Bean與標示為Bean有關的Annotation</h2><h3 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a>@Bean</h3><p>定義可共物件化的類別，叫做Bean，並且放置在Spring Ioc Container中並且給其管理，等待被呼叫使用。</p>
<h4 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h4><h5 id="1-程式碼Java-Code配置"><a href="#1-程式碼Java-Code配置" class="headerlink" title="1. 程式碼Java Code配置"></a>1. 程式碼Java Code配置</h5><p>Spring 的@Bean通常宣告在掛有@Configuration的Spring配置類別中的方法前，例如宣告一個 AppConfig.java，若有超過一個以上的bean，使用 @Qualifier給予名稱</p>
<p><img src="https://i.imgur.com/EsiQv3V.png" alt=""></p>
<p>AppConfig.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span>(name=<span class="string">"add"</span>)</span><br><span class="line">    <span class="function">Calculator <span class="title">addCalculator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AddCalculator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name=<span class="string">"sub"</span>)</span><br><span class="line">    <span class="function">Calculator <span class="title">subCalculator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SubCalculator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name=<span class="string">"mul"</span>)</span><br><span class="line">    <span class="function">Calculator <span class="title">mulCalculator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MulCalculator();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>定義Calculator的介面</p>
<p>Calculator.interface<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Calculator &#123;</span><br><span class="line">    int calc(int a, int b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>定義一個實作Calculator的類別</p>
<p>CalculatorImpl.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.will.advanced.demo.bean;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddCalculator</span> <span class="keyword">implements</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCalculator</span> <span class="keyword">implements</span>  <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MulCalculator</span> <span class="keyword">implements</span>  <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="取得註冊的bean的方式"><a href="#取得註冊的bean的方式" class="headerlink" title="取得註冊的bean的方式"></a>取得註冊的bean的方式</h4><h5 id="1-使用-Autowire-與-Qualifier"><a href="#1-使用-Autowire-與-Qualifier" class="headerlink" title="1. 使用@Autowire 與 @Qualifier"></a>1. 使用@Autowire 與 @Qualifier</h5><p>然後在 CommandLineRunner中使用 @AutoWire使用@Bean<br>，然而若要Autowired的類別對象是介面的話，且介面有很多的實作子類別<br>(AddCalculator, SubCalculator, MulCalculator)</p>
<p>那得透過 @Qualifier來指名是哪一個子類別</p>
<p>CommandLineAppStartupRunner.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommandLineAppStartupRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext context;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"add"</span>)</span><br><span class="line">    Calculator addCalculator;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"sub"</span>)</span><br><span class="line">    Calculator subCalculator;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"mul"</span>)</span><br><span class="line">    Calculator mulCaculator;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String...args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(addCalculator.calc(<span class="number">1</span>,<span class="number">3</span>));</span><br><span class="line">        System.out.println(subCalculator.calc(<span class="number">3</span>,<span class="number">2</span>));</span><br><span class="line">        System.out.println(mulCaculator.calc(<span class="number">2</span>,<span class="number">6</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="2-使用getBean"><a href="#2-使用getBean" class="headerlink" title="2. 使用getBean()"></a>2. 使用getBean()</h5><p>CommandLineAppStartupRunner.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommandLineAppStartupRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String...args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//　取得所有已經註冊的bean</span></span><br><span class="line">        System.out.println(Arrays.asList(context.getBeanDefinitionNames()));</span><br><span class="line">        <span class="comment">// 取得名稱為add的bean</span></span><br><span class="line">        Calculator addCalculator = context.getBean(<span class="string">"add"</span>, Calculator.class);</span><br><span class="line">        Calculator subCalculator = context.getBean(<span class="string">"sub"</span>, Calculator.class);</span><br><span class="line">        Calculator mulCalculator = context.getBean(<span class="string">"mul"</span>, Calculator.class);</span><br><span class="line">        </span><br><span class="line">        System.out.println(addCalculator.calc(<span class="number">1</span>,<span class="number">3</span>));</span><br><span class="line">        System.out.println(subCalculator.calc(<span class="number">3</span>,<span class="number">2</span>));</span><br><span class="line">        System.out.println(mulCalculator.calc(<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h6 id="補充-使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run-定義自訂義執行的內容"><a href="#補充-使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run-定義自訂義執行的內容" class="headerlink" title="補充: 使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run()定義自訂義執行的內容"></a>補充: 使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run()定義自訂義執行的內容</h6><p><a href="https://dzone.com/articles/spring-boot-applicationrunner-and-commandlinerunne" target="_blank" rel="noopener">https://dzone.com/articles/spring-boot-applicationrunner-and-commandlinerunne</a></p>
<h5 id="3-xml檔案配置"><a href="#3-xml檔案配置" class="headerlink" title="3. xml檔案配置"></a>3. xml檔案配置</h5><p>上面的寫法等同在 <code>appConfig.xml</code> 宣告:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean name=&quot;addCalculator&quot; class=&quot;com.will.advanced.TransferServiceImpl&quot;/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="ComponentScan-掃描指定package中掛有-Component的類別，自動註冊包含的bean"><a href="#ComponentScan-掃描指定package中掛有-Component的類別，自動註冊包含的bean" class="headerlink" title="@ComponentScan: 掃描指定package中掛有@Component的類別，自動註冊包含的bean"></a>@ComponentScan: 掃描指定package中掛有@Component的類別，自動註冊包含的bean</h4><p>不過一般在沒有特殊需求的情況下都會使用@ComponentScan掃描指定package中掛有@Component的類別來自動註冊為bean。</p>
<p>而會使用@Bean的時機為，當要被註冊為bean的類別建構步驟或邏輯比較複雜，此時就需要@Bean讓你可以在構造bean的方法內撰寫構造的詳細邏輯，而@ComponentScan就無法滿足比較細微的配置。</p>
<p>例如在 service層中新增一個 TestService class<br>透過@Component將TestService註冊成Bean<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class TestService &#123;</span><br><span class="line">    public String test() &#123;</span><br><span class="line">        return &quot;testing&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>透過@ComponentScan可使用@Component註冊的bean，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommandLineAppStartupRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    TestService testService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String...args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(testService.test());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="參考資料-2"><a href="#參考資料-2" class="headerlink" title="參考資料"></a>參考資料</h5><p>Spring: A Head Start 🔥 — Beans Configuration (Part 2)<br><a href="https://medium.com/omarelgabrys-blog/spring-a-head-start-beans-configuration-part-2-4a8c239b070a" target="_blank" rel="noopener">https://medium.com/omarelgabrys-blog/spring-a-head-start-beans-configuration-part-2-4a8c239b070a</a></p>
<h4 id="Scope-定義Bean被引用時要怎樣被使用"><a href="#Scope-定義Bean被引用時要怎樣被使用" class="headerlink" title="@Scope: 定義Bean被引用時要怎樣被使用"></a>@Scope: 定義Bean被引用時要怎樣被使用</h4><ul>
<li>singleton：在Spring IoC Container，該bean只會有單一實例(a single instance)，此為Spring預設值</li>
<li>prototype：在Spring IoC Container中，該bean可以有多個實例(any number of object instances)</li>
<li>request： 在每一次的HTTP Request，spring container會根據loginAction bean的定義來建立一個全新的instance，而且僅在目前的request中有效，所以可以放心的去更改instance的內部狀態，請求結束，request scope的bean instance會被destroy</li>
<li>session：針對某個HTTP Session，spring container會根據userPreference bean的定義來建立一個全新的instance，同樣的，和request scope一樣，可以放心的去更改instance內部狀態。</li>
<li>global-session：僅在portlet為基礎的Web應用下有作用。Porlet的規範中定義了global session的概念。</li>
</ul>
<h5 id="參考資料-3"><a href="#參考資料-3" class="headerlink" title="參考資料:"></a>參考資料:</h5><p>Spring Bean Scope 學習<br><a href="https://kevingo75.blogspot.com/2012/03/spring-bean-scope.html" target="_blank" rel="noopener">https://kevingo75.blogspot.com/2012/03/spring-bean-scope.html</a></p>
<h4 id="補充-什麼是Spring-IoC-Inversion-of-Control-container"><a href="#補充-什麼是Spring-IoC-Inversion-of-Control-container" class="headerlink" title="補充: 什麼是Spring IoC (Inversion of Control) container."></a>補充: 什麼是Spring IoC (Inversion of Control) container.</h4><p> Inversion of Control, or IoC for short, is a process in which an object defines its dependencies without creating them. This object delegates the job of constructing such dependencies to an IoC container.</p>
<p>用一柱話描述IoC： class不用自己主動new欲依賴class的instance，而是透過外部　(main()方法)　以建構子、setter或是介面注入來產生依賴class的instance</p>
<p>:::success<br>需要的 遊戲，不用自己 下載，而是 網咖提供 給你。<br>———————-||———————</p>
<p>需要的 物件，不用自己 取得，而是 服務容器 提供 給你。<br>———————-||———————<br>需要的 依賴實例，不用 主動 (Active) 建立，而是 被動 (Passive) 接收。<br>:::</p>
<h5 id="參考資料：-1"><a href="#參考資料：-1" class="headerlink" title="參考資料："></a>參考資料：</h5><p>控制反轉 (IoC) 與 依賴注入 (DI)<br><a href="https://notfalse.net/3/ioc-di" target="_blank" rel="noopener">https://notfalse.net/3/ioc-di</a></p>
<h3 id="Repository"><a href="#Repository" class="headerlink" title="@Repository"></a>@Repository</h3><p>简化 Spring 的开发。@Repository注解便属于最先引入的一批，它用于将数据访问层 (DAO 层 ) 的类标识为 Spring Bean。具体只需将该注解标注在 DAO类上即可。</p>
<h3 id="Service、-Controller-和-Component-將class標示为Bean"><a href="#Service、-Controller-和-Component-將class標示为Bean" class="headerlink" title="@Service、@Controller 和 @Component 將class標示为Bean"></a>@Service、@Controller 和 @Component 將class標示为Bean</h3><ul>
<li>@Component 是一个泛化的概念，仅仅表示一个组件 (Bean) ，可以作用在任何层次。</li>
<li>@Service 通常作用在業務邏輯層，但是目前该功能与 @Component 相同。</li>
<li>@Controller 通常作用在控制層(Controller)，但是目前该功能與@Component 相同。</li>
</ul>
<h3 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h3><p>被@PostConstruct修飾的方法會在服務器加載Servlet的時候運行，並且只會被服務器執行一次。</p>
<h3 id="Transactional"><a href="#Transactional" class="headerlink" title="@Transactional"></a>@Transactional</h3><p>假若你在class中設定了@Transactional, 該class所有的method有使用到JPA的都會被spring的transaction所管理。</p>
<p>舉例：當有個Transaction有三個動作：entity1.save, entity2.save, entity3.save.</p>
<p>若entity3.save失敗，那Spring就會將entity1.save與entity2.save的執行結果給rollback，還原其動作。</p>
<h4 id="參考資料-4"><a href="#參考資料-4" class="headerlink" title="參考資料"></a>參考資料</h4><p><a href="https://stackoverflow.com/questions/1099025/spring-transactional-what-happens-in-background" target="_blank" rel="noopener">https://stackoverflow.com/questions/1099025/spring-transactional-what-happens-in-background</a></p>
<h2 id="AOP相關的Annotaion"><a href="#AOP相關的Annotaion" class="headerlink" title="AOP相關的Annotaion"></a>AOP相關的Annotaion</h2><h3 id="Aspect"><a href="#Aspect" class="headerlink" title="@Aspect"></a>@Aspect</h3><p>@Aspect:定義AOP，作用在class</p>
<p>AOP為 Aspect Oritented Programming<br>AOP通過給程序定義一個切入點，然後在其前後切入不同的執行內容<br>AOP不會破壞原來的程序邏輯<br>AOP使用場景：</p>
<ul>
<li>紀錄日誌</li>
<li>事務管理</li>
<li>安全檢查</li>
<li>資源控制</li>
</ul>
<h3 id="Pointcut-Before-After"><a href="#Pointcut-Before-After" class="headerlink" title="@Pointcut, @Before, @After"></a>@Pointcut, @Before, @After</h3><p>範例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line">    <span class="comment">// 切入package為com.william.demo.api的LogTestApi類別的log函式</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.william.demo.api.LogTestApi.log(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 希望在切入點　log()函式前執行某些內容</span></span><br><span class="line">    <span class="comment">// 或是用直接用　@Before("execution(* com.william.demo.api.LogTestApi.log(..))");</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"log()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"----------do before---------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"log()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"----------do after----------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="其他Annotation"><a href="#其他Annotation" class="headerlink" title="其他Annotation"></a>其他Annotation</h2><h3 id="Cache"><a href="#Cache" class="headerlink" title="@Cache"></a>@Cache</h3><p>定義cache策略與範圍，可以定義以下參數：</p>
<ul>
<li><p>usage: 當前緩存策略(NONE, READ_ONLY, NONSTRICT_READ_WRITE, TRANSACTIONAL)</p>
<ul>
<li>read-only: 只讀緩存<ul>
<li>如果你的應用程序只需讀取一個持久化類的實例，而無需對其修改， 那麼就可以對其進行只讀緩存</li>
</ul>
</li>
<li>read-write: 讀寫緩存<ul>
<li>如果應用程序需要更新數據，那麼使用讀/寫緩存比較合適。如果應用程序要求“序列化事務”的隔離級別（serializable transaction isolation level），那麼就決不能使用這種緩存策略</li>
</ul>
</li>
<li>nonstrict-read-write: 不嚴格讀寫緩存<ul>
<li>如果應用程序只偶爾需要更新數據（也就是說，兩個事務同時更新同一記錄的情況很不常見），也不需要十分嚴格的事務隔離，那麼比較適合使用非嚴格讀/寫緩存策略。</li>
</ul>
</li>
<li>transactional :事務性緩存<ul>
<li>Hibernate 的事務緩存策略提供了全事務的緩存支持，例如對 JBoss TreeCache 的支持。這樣的緩存只能用於 JTA 環境中，你必須指定為其hibernate.transaction.manager_lookup_class屬性。</li>
</ul>
</li>
</ul>
</li>
<li><p>region: 可選參數，指定二級緩存的去域名，默認為類或者集合的名字。</p>
</li>
<li>include: 可選參數(all, non-lazy)。 all包含所有屬性，non-lazy僅包含非延遲加載的屬性。</li>
</ul>
<h4 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Table(name = &quot;PROVICE&quot;)</span><br><span class="line">@Cache(usage =CacheConcurrencyStrategy.READ_ONLY)</span><br><span class="line">public class Province() &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Table(name = &quot;PROVICE&quot;)</span><br><span class="line">@Cache(usage =CacheConcurrencyStrategy.READ_ONLY)</span><br><span class="line">public class Province() &#123; </span><br><span class="line">    @OneToMany(fetch = FetchType.LAZY)</span><br><span class="line">    @JoinColumn(name = &quot;cityId&quot;)</span><br><span class="line">    @Cache(usage = CacheConcrrencyStrategy.READ_ONLY)</span><br><span class="line">    private Set&lt;City&gt; cities;</span><br></pre></td></tr></table></figure>
<h5 id="參考資料-5"><a href="#參考資料-5" class="headerlink" title="參考資料"></a>參考資料</h5><p>Hibernate @Cache注解-天才小小布<br><a href="https://blog.csdn.net/w410589502/article/details/54603265" target="_blank" rel="noopener">https://blog.csdn.net/w410589502/article/details/54603265</a></p>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h3><p>@Configuration的作用同以前的xml配置檔（例如Spring的applicationContext.xml或dispatcher-servlet.xml），用來設定Spring環境配置，例如宣告及註冊bean至Spring容器中，注入properties參數等。</p>
<h4 id="範例-1"><a href="#範例-1" class="headerlink" title="範例"></a>範例</h4><p>例如我們有一個FooService類別，若此類別要成為Spring容器管理的bean，有兩種方法：</p>
<ol>
<li>一般在該類別上宣告@Component並搭配@ComponentScan掃描的方式註冊為bean</li>
<li>透過在@Configuration類別中搭配@Bean的方式註冊。</li>
</ol>
<p>例如建立一個AppConfig並在類別名稱前掛上@Configuration，則此類別及成為Spring的配置類。在配置類的方法前掛上@Bean則方法回傳的物件就會被註冊為Spring容器管理的bean</p>
<p>fooService()方法便會將FooService註冊為bean。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.will.advanced.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.will.advanced.demo.service.FooService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FooService <span class="title">fooService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FooService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>為了程式管理及維護上的方便，通常我們會把某些相關的配置寫在另外的配置檔，而不是全部塞在同一個類別，此時就可以利用@Configuration另外定義一個配置檔，例如上面的AppConfig。</p>
<h4 id="SpringBootApplication-本身也包含-Configuration"><a href="#SpringBootApplication-本身也包含-Configuration" class="headerlink" title="@SpringBootApplication: 本身也包含@Configuration"></a>@SpringBootApplication: 本身也包含@Configuration</h4><p>而在Spring Boot中，<span style="color:red">@SpringBootApplication類本身即包含了@Configuration，所以可以直接在裡面進行如上Bean的配置</span>，例如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.will.advanced.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.will.advanced.demo.FooService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootBeanDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringBootBeanDemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FooService <span class="title">fooService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> FooService();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="參考資料-6"><a href="#參考資料-6" class="headerlink" title="參考資料"></a>參考資料</h5><p>Spring @Configuration作用<br><a href="https://matthung0807.blogspot.com/2019/04/spring-configuration_28.html" target="_blank" rel="noopener">https://matthung0807.blogspot.com/2019/04/spring-configuration_28.html</a></p>
<h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><p>定義 @SpringBootApplication的預設掃瞄bean的範圍</p>
<p>Spring Boot的@SpringBootApplication預設只會掃描所屬package下的類，因此若@Configuration類別定義在@SpringBootApplication類以外的package，則要用scanBasePackages屬性來設定要額外掃描的package，例如@SpringBootApplication(scanBasePackages=”com.will.advanced.demo.config”)　（@Configuration包含了@Component），</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.will.advanced.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="comment">// 注意在scanBasePackages的package名稱</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(scanBasePackages=<span class="string">"com.will.advanced.demo.config"</span>) </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootBeanDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringBootBeanDemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h4><p>或是透過@Import來引入 ，例如<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.will.advanced.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// 注意pacakge名稱</span></span><br><span class="line"><span class="meta">@Import</span>(value = &#123; com.will.advanced.demo.config.AnotherAppConfig.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootBeanDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringBootBeanDemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>:::warning<br>注意使用@Import會忽略@Configuration設定<br>:::</p>
<h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>依賴注入物件</p>
<p>Spring的@Autowired用來依賴注入物件，典型的用法就是掛在類別成員變數上。@Autowired預設會依注入對象的類別型態來選擇容器(透過@Configuration定義的class會成為容器)中相符的物件(設置成bean)來注入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Car car;</span><br></pre></td></tr></table></figure>
<p>Spring會自動去容器中找到　有容器定義CarBeans的bean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ....xxx.Car;</span><br><span class="line"><span class="meta">@Configuation</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarBeans</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Car <span class="title">car</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Car() &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Autowire為Spring IoC的實現，不用自己去new一個car出來，而是透過容器(會做constructor or setter or interface injection)，來去實現外部注入，降低模組(class)之間的耦合性</p>
<h3 id="EnableScheduling"><a href="#EnableScheduling" class="headerlink" title="@EnableScheduling"></a>@EnableScheduling</h3><p>若開發者在AppConfig類中使用了@EnableScheduling，並在某個task class中使用了@Schedule註解，那麼被@Schedule標註的方法既可以在指定時間內自動執行</p>
<p>注意：@EnableScheduling要與@Schedule搭配使用才有效果</p>
<h3 id="ConfigurationProperties"><a href="#ConfigurationProperties" class="headerlink" title="@ConfigurationProperties"></a>@ConfigurationProperties</h3><p>若想要把配置文件的信息，讀取好並自動封裝(getter讀取private的config值)成實體類，如此一來我們在代碼裡面使用就輕鬆許多，這時就可以使用@ConfiguationProperties，把同類的配置訊息自動封裝成實體類。</p>
<p>假設有設定文件在 <code>application.properties</code>之下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">connection.username=admin</span><br><span class="line">connection.password=kyjufskifas2jsfs</span><br><span class="line">connection.remoteAddress=192.168.1.1</span><br></pre></td></tr></table></figure></p>
<p>我們可以定義一個實體類在裝載配置文件信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"connection"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionSettings</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String remoteAddress;</span><br><span class="line">    <span class="keyword">private</span> String password ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRemoteAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> remoteAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRemoteAddress</span><span class="params">(String remoteAddress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.remoteAddress = remoteAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>亦可以把 @ConfigurationProperties 定義在@Bean之下，說明@Bean是參考到有用configuationProperties設定的class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"connection"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConnectionSettings <span class="title">connectionSettings</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConnectionSettings();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要使用時直接用@Autowire注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/task"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaskController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//　在這裡注入 config！</span></span><br><span class="line">    <span class="meta">@Autowired</span> ConnectionSettings conn;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = &#123;<span class="string">"/"</span>,<span class="string">""</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hellTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String userName = conn.getUsername();     </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello task !!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="參考資料：-2"><a href="#參考資料：-2" class="headerlink" title="參考資料："></a>參考資料：</h5><p>spring boot 使用@ConfigurationProperties<br><a href="https://blog.csdn.net/yingxiake/article/details/51263071" target="_blank" rel="noopener">https://blog.csdn.net/yingxiake/article/details/51263071</a></p>
<h3 id="ConditionalOnClass"><a href="#ConditionalOnClass" class="headerlink" title="@ConditionalOnClass"></a>@ConditionalOnClass</h3><p>是Springboot实现自动配置的重要支撑之一。其用途是判断当前classpath下是否存在指定类，若是则将当前的配置装载入spring容器。</p>
<h5 id="參考資料：-3"><a href="#參考資料：-3" class="headerlink" title="參考資料："></a>參考資料：</h5><p>@ConditionalOnClass的使用探索 新日暮里格斗大会<br><a href="https://blog.csdn.net/lucyTheSlayer/article/details/80430912" target="_blank" rel="noopener">https://blog.csdn.net/lucyTheSlayer/article/details/80430912</a></p>
<h3 id="ConditionalOnMissingBean"><a href="#ConditionalOnMissingBean" class="headerlink" title="@ConditionalOnMissingBean"></a>@ConditionalOnMissingBean</h3><p>结合使用注解@ConditionalOnMissingBean和@Bean,可以做到只有特定名称或者类型的Bean不存在于BeanFactory中时才创建某个Bean </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionalOnMissingBeanConfig</span> </span>&#123;</span><br><span class="line">  <span class="comment">//　無條件定義一個bean</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> A <span class="title">beanA</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> A(); <span class="comment">//　</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">　<span class="meta">@ConditionalOnMissingBean</span>(name=<span class="string">"beanA"</span>)</span><br><span class="line">　<span class="function"><span class="keyword">public</span> B <span class="title">beanB</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 如果 beanFactory 中存在一个名称为 beanA 的 bean，才定义bean ： beanB；</span></span><br><span class="line">　　<span class="comment">// 因为上面的方法已经定义了一个 beanA，所以这里 beanB定义并不会发生。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> B(); </span><br><span class="line">　&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">　<span class="meta">@Bean</span></span><br><span class="line">　<span class="meta">@ConditionalOnMissingBean</span>(name=<span class="string">"beanD"</span>)</span><br><span class="line">　<span class="function"><span class="keyword">public</span> C <span class="title">beanC</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 如果 beanFactory 中存在一个名称为 beanD的 bean，才定义bean ： beanC；	    </span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> C(); </span><br><span class="line">　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="參考資料：-4"><a href="#參考資料：-4" class="headerlink" title="參考資料："></a>參考資料：</h4><p>Spring Boot基于特定条件创建Bean例子 : ConditionalOnMissingBeanhttps:<br>//blog.csdn.net/andy_zhang2007/article/details/81285130</p>

    </div>
    
    <div class="post-footer">
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/2020/04/11/Spring-Security介紹/" class="pre-post btn btn-default" title="Spring Security 功能介紹">
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            Spring Security 功能介紹</span>
    </a>
    
    
    <a href="/2020/01/28/linux-bash/" class="next-post btn btn-default" title="認識與學習Bash [Linux鳥哥 Ch10]">
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            認識與學習Bash [Linux鳥哥 Ch10]</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    <div id="disqus_thread"></div>
    

<script type="text/javascript">
var disqus_config = function() {
    this.page.url = 'http://a10000005588.github.io/2020/03/10/Spring-Annotation介紹/';
    this.page.identifier = '2020/03/10/Spring-Annotation介紹/';
    this.page.title = 'Spring Annotation筆記整理';
};

// Only if disqus_thread id is defined load the embed script
if (document.getElementById('disqus_thread')) {
    var dsq = document.createElement('script');
    var head = document.getElementsByTagName('head')[0];
    var body = document.getElementsByTagName('body')[0];

    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.setAttribute('data-timestamp', '' + +new Date());
    dsq.src = 'https://williamblog-1.disqus.com/embed.js';

    console.log('head', head);
    console.log('body', body);
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}
  
</script>

</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            Table of Contents
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Annotation-筆記"><span class="toc-text">Spring Annotation 筆記</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#API-相關-Annotation"><span class="toc-text">API 相關 @Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RestController"><span class="toc-text">@RestController</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RestControllerAdvice"><span class="toc-text">@RestControllerAdvice</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ExceptionHandler"><span class="toc-text">@ExceptionHandler</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestMapping"><span class="toc-text">@RequestMapping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP動作Annotation"><span class="toc-text">HTTP動作Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PostMapping"><span class="toc-text">@PostMapping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GetMapping"><span class="toc-text">@GetMapping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PutMapping"><span class="toc-text">@PutMapping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DeleteMapping"><span class="toc-text">@DeleteMapping</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestBody"><span class="toc-text">@RequestBody</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestHeader、-CookieValue"><span class="toc-text">@RequestHeader、@CookieValue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SessionAttributes"><span class="toc-text">@SessionAttributes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JsonProperty-重點，遇到接不到request的值，用這就對了"><span class="toc-text">@JsonProperty (重點，遇到接不到request的值，用這就對了)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#參考資料"><span class="toc-text">參考資料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#驗證相關的Annotation"><span class="toc-text">驗證相關的Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Valid與-Validated"><span class="toc-text">@Valid與@Validated</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Validate-與-Valid差異"><span class="toc-text">@Validate 與 @Valid差異</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#補充-負責校驗的Annotation"><span class="toc-text">補充 負責校驗的Annotation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#補充-用BindingResult接收-Valid拋出來的錯誤訊息"><span class="toc-text">補充: 用BindingResult接收@Valid拋出來的錯誤訊息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#參考資料："><span class="toc-text">參考資料：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#操作數據庫相關數據相關的Annotation"><span class="toc-text">操作數據庫相關數據相關的Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Entity"><span class="toc-text">@Entity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Id"><span class="toc-text">@Id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GeneratedValue"><span class="toc-text">@GeneratedValue</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerationType-Auto"><span class="toc-text">GenerationType.Auto</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerationType-IDENTITY"><span class="toc-text">GenerationType.IDENTITY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerationType-SEQUENCE"><span class="toc-text">GenerationType.SEQUENCE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GenerationType-SEQUENCE-1"><span class="toc-text">GenerationType.SEQUENCE</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Reference-https-thoughts-on-java-org-jpa-generate-primary-keys"><span class="toc-text">Reference: https://thoughts-on-java.org/jpa-generate-primary-keys/</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IdClass-复合主键"><span class="toc-text">@IdClass 复合主键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Embeddable"><span class="toc-text">@Embeddable</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Column"><span class="toc-text">@Column</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#參考資料-1"><span class="toc-text">參考資料:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data"><span class="toc-text">@Data</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#前置作業：-引入lombok"><span class="toc-text">前置作業： 引入lombok</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何使用lobok"><span class="toc-text">如何使用lobok</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring載入Bean與標示為Bean有關的Annotation"><span class="toc-text">Spring載入Bean與標示為Bean有關的Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean"><span class="toc-text">@Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#配置方式"><span class="toc-text">配置方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-程式碼Java-Code配置"><span class="toc-text">1. 程式碼Java Code配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#取得註冊的bean的方式"><span class="toc-text">取得註冊的bean的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-使用-Autowire-與-Qualifier"><span class="toc-text">1. 使用@Autowire 與 @Qualifier</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-使用getBean"><span class="toc-text">2. 使用getBean()</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#補充-使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run-定義自訂義執行的內容"><span class="toc-text">補充: 使用CommandlineRunner讓Spring設置可以先被載入，然後可透過run()定義自訂義執行的內容</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-xml檔案配置"><span class="toc-text">3. xml檔案配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ComponentScan-掃描指定package中掛有-Component的類別，自動註冊包含的bean"><span class="toc-text">@ComponentScan: 掃描指定package中掛有@Component的類別，自動註冊包含的bean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料-2"><span class="toc-text">參考資料</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scope-定義Bean被引用時要怎樣被使用"><span class="toc-text">@Scope: 定義Bean被引用時要怎樣被使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料-3"><span class="toc-text">參考資料:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#補充-什麼是Spring-IoC-Inversion-of-Control-container"><span class="toc-text">補充: 什麼是Spring IoC (Inversion of Control) container.</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料：-1"><span class="toc-text">參考資料：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Repository"><span class="toc-text">@Repository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service、-Controller-和-Component-將class標示为Bean"><span class="toc-text">@Service、@Controller 和 @Component 將class標示为Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PostConstruct"><span class="toc-text">@PostConstruct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transactional"><span class="toc-text">@Transactional</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#參考資料-4"><span class="toc-text">參考資料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP相關的Annotaion"><span class="toc-text">AOP相關的Annotaion</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Aspect"><span class="toc-text">@Aspect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pointcut-Before-After"><span class="toc-text">@Pointcut, @Before, @After</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他Annotation"><span class="toc-text">其他Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cache"><span class="toc-text">@Cache</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#範例"><span class="toc-text">範例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料-5"><span class="toc-text">參考資料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuration"><span class="toc-text">@Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#範例-1"><span class="toc-text">範例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringBootApplication-本身也包含-Configuration"><span class="toc-text">@SpringBootApplication: 本身也包含@Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料-6"><span class="toc-text">參考資料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBootApplication"><span class="toc-text">@SpringBootApplication</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Import"><span class="toc-text">@Import</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Autowired"><span class="toc-text">@Autowired</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EnableScheduling"><span class="toc-text">@EnableScheduling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConfigurationProperties"><span class="toc-text">@ConfigurationProperties</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料：-2"><span class="toc-text">參考資料：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConditionalOnClass"><span class="toc-text">@ConditionalOnClass</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#參考資料：-3"><span class="toc-text">參考資料：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConditionalOnMissingBean"><span class="toc-text">@ConditionalOnMissingBean</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#參考資料：-4"><span class="toc-text">參考資料：</span></a></li></ol></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2017
                    
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>